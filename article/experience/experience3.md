# 零基础前端成长攻略「三」

## 5 提升

转正之后，我也如愿迎来了职业生涯中的第一次项目重构。

### 5.1 重构开始

我负责的微店项目，新出了一套视觉设计。涉及包括首页在内的 4 个一级页面，以及一个重要模块。由于任务量比较大，**同事X**也完成了之前的任务，因此回到了微店项目中。

按照常规做法，算是多个页面的更新。但是涉及的页面经过多次迭代之后，实际上已经冗余不堪，新版和老版视觉之间差异较大。项目原有的，差不多一年前构建的 gulp + jQuery 技术栈已经远不满足现状。

因此，在征得领导同意后，我和**同事X**决定使用 vue 框架开发新版页面。不过需要解决以下问题：

- 新旧版本页面之间的数据交互
  在 vue 框架中，页面通过路由切换，可以使用 vuex。但是跳转到老版页面时，相当于进行一次刷新，无可避免的会丢失所有 vuex 状态。初期考虑过通过 sessionStorage 暂存，不过实际上，各个老页面中已经存在有许多读取 sessionStorage 的操作。
  假设要使用 vuex，要么兼容，要么使用两套逻辑，因此决定不在项目中使用 vuex，按照之前的逻辑使用 sessionStorage。

- 新旧版本页面之间的样式差别
  在一开就和设计交流过，老页面有的公共样式（弹层，弹窗，加载动画）尽量复用。

- 新旧页面之间的尺寸差别
  旧页面使用的是媒体查询配合 rem 。实际上除开字体大小，多数样式使用的是 px 或者 %，页面适配性不佳。
  新页面使用我之前写的[自适应插件](https://github.com/xiajunqcy/Qiu-AutoRem)。
  新老页面之间不存在共用组件和样式，因此影响不大。
- UI 组件
  老页面没有系统的引用 UI 组件，基本属于用到什么写什么。组件之间关联性小，难以复用。
  综合考虑之后，决定引入 mint-ui 作为新页面的 ui。

这些问题解决之后，剩下的就简单了。

> 整理出来的框架 [vue-normal](https://github.com/xiajunqcy/project/tree/master/vue-normal)

### 5.2 持续集成